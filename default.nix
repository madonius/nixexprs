/* A small release file, with few packages to be built.  The aim is to reduce
   the load on Hydra when testing the `stdenv-updates' branch. */

{ nixpkgs
, supportedSystems ? [ "x86_64-linux" ]
}:

with import <nixpkgs/pkgs/top-level/release-lib.nix> { inherit supportedSystems; };
(mapTestOn (rec {

  ack = all;
  aspell = all;
  at = linux;
  aterm25 = all;
  atom = linux;
  atop = all;
  autoconf = all;
  automake = all;
  autossh = all;
  avahi = allBut cygwin;  # Cygwin builds fail
  bash = all;
  bashInteractive = all;
  bc = all;
  bind = linux;
  binutils = linux;
  binwalk = all;
  bsdiff = all;
  busybox = all;
  byobu = all;
  bzip2 = all;
  chromium = all;
  chrony = all;
  clawsMail = all;
  cmake = all;
  coreutils = all;
  cpio = all;
  cron = linux;
  cups = linux;
  dhcp = linux;
  di = all;
  diffutils = all;
  dnsmasq = all;
  dpkg = linux;
  debootstrap = all;
  e2fsprogs = linux;
  emacs24 = gtkSupported;
  enscript = all;
  #fail2ban = all;
  feh = all;
  file = all;
  findutils = all;
  firefox-wrapper = all;
  flex = all;
  gajim = all;
  gcc = all;
  gimp = linux;
  gitAndTools.gitFull = all;
  gitAndTools.tig = all;
  gitAndTools.hub = all;
  glibc = linux;
  glibcLocales = linux;
  gnat = linux;
  gnugrep = all;
  gnum4 = all;
  gnumake = all;
  gnupatch = all;
  gnupg = linux;
  gnupg21 = all;
  gnuplot = allBut cygwin;
  gnused = all;
  gnutar = all;
  gnutls = linux;
  gogoclient = linux;
  grub2 = linux;
  gsl = linux;
  guile = linux;  # tests fail on Cygwin
  gzip = all;
  hddtemp = linux;
  hdparm = linux;
  hello = all;
  horst = all;
  host = linux;
  htop = all;
  i3 = all;
  i3lock = all;
  i3status = all;
  iana_etc = linux;
  icecast = all;
  icewm = linux;
  idutils = all;
  ifplugd = linux;
  inetutils = linux;
  inkscape = linux;
  iperf2 = all;
  iperf3 = all;
  iputils = linux;
  jnettop = linux;
  jwhois = linux;
  kbd = linux;
  keen4 = ["i686-linux"];
  kvm = linux;
  less = all;
  lftp = all;
  libressl = all;
  libreoffice = linux;
  libtool = all;
  libtool_2 = all;
  libvirt = all;
  libxml2 = all;
  libxslt = all;
  lolcat = all;
  lout = linux;
  lsh = linux;
  lsof = linux;
  ltrace = linux;
  lvm2 = linux;
  lxc = linux;
  lxd = linux;
  lynx = linux;
  lzma = linux;
  man = linux;
  manpages = linux;
  mc = all;
  mcron = linux;
  mdadm = linux;
  mercurial = all;
  mesa = mesaPlatforms;
  mingetty = linux;
  mk = linux;
  mktemp = all;
  module_init_tools = linux;
  monotone = linux;
  mpg321 = linux;
  mplayer = all;
  mpv = all;
  mtr = all;
  mupdf = all;
  mutt = linux;
  mysql = linux;
  ncat = linux;
  ncdu = all;
  ncmpcpp = all;
  netcat = all;
  nfs-utils = linux;
  nix = all;
  nixUnstable = all;
  nixops = all;
  nixopsUnstable = all;
  nmap = all;
  nodejs = all;
  nss_ldap = linux;
  nssmdns = linux;
  ntfs3g = linux;
  ntp = linux;
  openjdk = all;
  openssh = linux;
  openssl = all;
  openvpn = all;
  packer = all;
  pan = gtkSupported;
  pandoc = all;
  par2cmdline = all;
  pavucontrol = all;
  pass = all;
  pciutils = linux;
  pdf2xml = all;
  perf-tools = linux;
  perl = all;
  pkgconfig = all;
  pmccabe = linux;
  poezio = all;
  policykit = linux;
  portmap = linux;
  postfix = all;
  postfix30 = all;
  postgresql = all;
  powertop = all;
  procps = linux;
  prosody = all;
  pulseaudioFull = all;
  pulseaudioLight = all;
  pwgen = all;
  python = allBut cygwin;
  pythonFull = linux;
  pv = all;
  qemu = linux;
  qemu_kvm = linux;
  readline = all;
  redshift = all;
  rlwrap = all;
  rpm = linux;
  rsync = linux;
  rxvt_unicode-with-plugins = all;
  screen = linux ++ darwin;
  scrot = linux;
  sdparm = linux;
  sharutils = all;
  sipcalc = all;
  sl = all;
  sloccount = allBut cygwin;
  smartmontools = all;
  socat = all;
  sqlite = allBut cygwin;
  squid = linux;
  sshfsFuse = all;
  sslscan = all;
  ssmtp = linux;
  stdenv = all;
  strace = linux;
  su = linux;
  sudo = linux;
  sysklogd = linux;
  syslinux = ["i686-linux"];
  sysstat = all;
  sysvinit = linux;
  sysvtools = linux;
  tcl = linux;
  tcpdump = linux;
  terminator = all;
  time = linux;
  tinc_pre = all;
  tinycc = linux;
  tmux = all;
  toilet = all;
  udev = linux;
  units = all;
  unrar = linux;
  unzip = all;
  upstart = linux;
  usbutils = linux;
  utillinux = linux;
  utillinuxCurses = linux;
  vagrant = all;
  vim = all;
  vimHugeX = all;
  virtmanager = all;
  vlc = linux;
  w3m = all;
  wavemon = all;
  webkit = linux;
  weechat = all;
  wget = all;
  which = all;
  whois = all;
  wirelesstools = linux;
  wireshark-dev = linux;
  wpa_supplicant = linux;
  xfsprogs = linux;
  xkeyboard_config = linux;
  youtubeDL = all;
  zathura = all;
  zile = linux;
  zip = all;

  dbus = {
    libs = linux;
    daemon = linux;
    tools = linux;
  };

  linux = linux;
  linuxHeaders = linux;
  linuxPackages_4_3 = {
    kernel = linux;
    kernelHeaders = linux;
    perf = linux;
  };

  nodePackages = {
    bower = all;
    grunt-cli = all;
  };

  xorg = {
    xkill = all;
    xmessage = all;
    xbacklight = all;
  };

} ))
